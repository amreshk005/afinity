(this.webpackJsonpaa=this.webpackJsonpaa||[]).push([[0],{103:function(e,t,a){e.exports=a(167)},108:function(e,t,a){},113:function(e,t,a){},167:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(3),l=a.n(c),i=(a(108),a(8)),o=a(36),s=a(88),u=a(53),d=a(54),m=a(2),p={isLoading:!1,data:[],cart:[],error:"",isLogin:!1,user:[{id:"aisdno",username:"amresh",password:"amresh",cart:[]}]},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PRODUCT_REQUEST":return Object(m.a)(Object(m.a)({},e),{},{isLoading:!0});case"FETCH_PRODUCT_SUCCESS":var a=t.data.products;return localStorage.setItem("data",JSON.stringify(a)),Object(m.a)(Object(m.a)({},e),{},{isLoading:!1,data:a,error:e.error});case"FETCH_PRODUCT_FAILURE":return Object(m.a)(Object(m.a)({},e),{},{isLoading:!1,data:e.data,error:t.error});case"ADD_PRODUCT_TO_CART":var n=t.product,r=n.userId,c=n.selectedItem,l=e.user.map((function(e){if(e.id===r){var t=0!==e.cart.filter((function(e){return e._id===c._id})).length?e.cart.map((function(e){return e._id===c._id?Object(m.a)(Object(m.a)({},e),{},{quantity:e.quantity+1}):e})):[].concat(Object(d.a)(e.cart),[c]);return e.cart=t,e}return e})),i=Object(u.a)(l,1),o=i[0];return Object(m.a)(Object(m.a)({},e),{},{user:l,cart:o.cart});case"REMOVE_PRODUCT_FROM_CART":var s=t.productId,b=s.userId,f=s.id,h=void 0,g=e.user.map((function(e){if(e.id===b){var t=e.cart.filter((function(e){return e._id!==f}));return e.cart=t,h=t,e}return e}));return Object(m.a)(Object(m.a)({},e),{},{user:g,cart:h});case"UPDATE_CART":var E=t.product,v=E.userId,O=E.item;console.log(v,O);var y=void 0,j=e.user.map((function(e){if(e.id===v){var t=e.cart.map((function(e){return e._id===O._id?Object(m.a)(Object(m.a)({},e),{},{quantity:O.quantity}):e}));return console.log("match",t),e.cart=t,y=t,e}return e}));return console.log("cart",y),Object(m.a)(Object(m.a)({},e),{},{user:j,cart:y});case"FILTER_DATA":var N=JSON.parse(localStorage.getItem("data")),C=N.filter((function(e){return e.category===t.filterType}));return Object(m.a)(Object(m.a)({},e),{},{data:C.length>0?C:N});case"AUTH_HANDLER":return Object(m.a)(Object(m.a)({},e),{},{isLogin:!e.isLogin});case"EMPTY_CART":var w=e.user.map((function(e){return e.id===t.userId?(e.cart=[],e):e}));return Object(m.a)(Object(m.a)({},e),{},{user:w,cart:[]});default:return e}},f=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.c,h=Object(o.d)(b,f(Object(o.a)(s.a))),g=a(27),E=a(22),v=a(23),O=a(25),y=a(24),j=(a(113),a(56),a(169)),N=a(40),C=a(60),w=a.n(C),x=a(90),_=a(91),k=a.n(_),T=function(e){return{type:"FETCH_PRODUCT_SUCCESS",data:e}},S=function(e){return{type:"UPDATE_CART",product:e}},R=function(e){return{type:"REMOVE_PRODUCT_FROM_CART",productId:e}},A=a(170);var H=Object(i.b)((function(e){return{cart:e.cart}}),(function(e){return{cartRemove:function(t){return e(R(t))},cartUpdate:function(t){return e(S(t))}}}))((function(e){var t=JSON.parse(localStorage.getItem("userId"));function a(a,n){var r=n.quantity;switch(a.target.getAttribute("name")){case"inc":r+=1;break;case"dec":r=r>0?r-1:r}e.cartUpdate({userId:t,item:Object(m.a)(Object(m.a)({},n),{},{quantity:r})})}return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row flex-column m-0 flex-nowrap",style:{width:"40rem",height:"30rem",overflow:"scroll"}},0===e.cart.length?r.a.createElement("div",{className:"d-flex justify-content-center align-items-center"},"Cart is Empty"):r.a.createElement("div",{className:"d-flex flex-column justify-content-between",style:{minHeight:"30rem"}},r.a.createElement("div",null,e.cart.map((function(n){return r.a.createElement("div",{key:Object(A.a)(),className:"card flex-row border mt-3",style:{height:"9rem"}},r.a.createElement("img",{src:n.product_image,className:"card-img-top h-100 w-25",alt:"..."}),r.a.createElement("div",{className:"card-body d-flex justify-content-between p-1 "},r.a.createElement("div",{className:"w-50"},r.a.createElement("h5",{className:"card-title m-0 text-capitalize"},n.product_name," "),r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("span",null,"Quantity :"),r.a.createElement("div",{className:"d-flex flex-column p-2 align-items-center "},r.a.createElement("span",{name:"inc",className:"p-1 bg-dark rounded-circle w-50 h-50 text-white text-center mb-1",onClick:function(e){return a(e,n)}},"+"),r.a.createElement("input",{type:"number",value:n.quantity,style:{width:"35px"},readOnly:!0}),r.a.createElement("span",{name:"dec",className:"p-1 bg-dark rounded-circle w-50 h-50 text-white text-center mt-1",onClick:function(e){return a(e,n)}},"-")))),r.a.createElement("div",{className:"d-flex align-items-end"},r.a.createElement("button",{className:"btn btn-dark rounded-0",onClick:function(){return e.cartRemove({userId:t,id:n._id})}},"Remove"))))}))),"/checkout"!==e.location?r.a.createElement(g.b,{to:function(e){return Object(m.a)(Object(m.a)({},e.location),{},{pathname:"/checkout"})},className:"w-100"},r.a.createElement("button",{type:"button",className:"btn btn-danger w-100",onClick:e.hide},"Checkout")):"")))})),L=a(45),D=a(168),I=function(e){Object(O.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).inputHandler=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(L.a)({},a,r))},n.submitHandler=function(e){var t=!1;e.preventDefault(),n.props.user.forEach((function(e){"amresh"===e.username&&"amresh"===e.password&&(localStorage.setItem("userId",JSON.stringify(e.id)),n.props.handleOk(),t=!0)})),!1===t&&alert("Please Enter correct username and password")},n.state={username:"",password:""},n}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.loading,n=e.handleCancel;return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{visible:t,title:"Title",onOk:this.submitHandler,onCancel:n,footer:[r.a.createElement(N.a,{key:"back",onClick:n},"Cancel"),r.a.createElement(N.a,{key:"submit",type:"primary",loading:a,onClick:this.submitHandler},"Login")]},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{name:"username",type:"text",className:"form-control","aria-describedby":"emailHelp",placeholder:"Enter email",value:this.state.username,onChange:this.inputHandler}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else.")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{name:"password",type:"password",className:"form-control",placeholder:"Password",value:this.state.password,onChange:this.inputHandler})))))}}]),a}(n.Component),U=Object(i.b)((function(e){return{user:e.user}}),(function(e){return{authHandler:function(t){return e({type:"AUTH_HANDLER"})}}}))(I),F=function(e){Object(O.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).showModal=function(){n.setState({visible:!0})},n.handleOk=function(){n.setState({loading:!1,visible:!1}),n.props.authHandler(),n.props.history.push({pathname:"/",fromDashBoard:!0})},n.handleCancel=function(){n.setState({visible:!1})},n.hide=function(){n.setState({badge:!1})},n.handleVisibleChange=function(e){n.setState({badge:e})},n.state={visible:!1,badge:!1},n}return Object(v.a)(a,[{key:"render",value:function(){var e=this.state,t=e.visible,a=e.loading,n=this.props.history.location;return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light justify-content-between"},r.a.createElement(g.b,{to:"/"},r.a.createElement("span",{className:"navbar-brand"},"Navbar")),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse justify-content-end",id:"navbarSupportedContent"},this.props.isLogin?r.a.createElement("div",{className:"mr-lg-5 pr-lg-5 position-relative"},r.a.createElement("div",{className:"border rounded-circle bg-dark position-absolute text-center text-white",style:{height:"25px",width:"25px",zIndex:"10",top:"-12px",left:"-12px"}},this.props.cart.length),r.a.createElement(j.a,{placement:"bottom",title:"Cart",content:r.a.createElement(H,{hide:this.hide,location:n.pathname}),trigger:"click",visible:this.state.badge,onVisibleChange:this.handleVisibleChange},r.a.createElement(N.a,null,"CART"))):"",r.a.createElement("div",{className:"row pr-lg-5 align-items-center mr-lg-5"},this.props.isLogin?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"border rounded-circle bg-dark",style:{height:"45px",width:"45px"}}),r.a.createElement("li",{className:"nav-item dropdown list-group"},r.a.createElement("span",{className:"nav-link dropdown-toggle",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Username"),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},r.a.createElement("span",{className:"dropdown-item",onClick:this.handleOk},"Logout")))):r.a.createElement("div",null,r.a.createElement("div",{role:"button",onClick:this.showModal},"Login"),r.a.createElement(U,{visible:t,loading:a,handleOk:this.handleOk,handleCancel:this.handleCancel}))))))}}]),a}(n.Component),P=Object(i.b)((function(e){return{cart:e.cart,isLogin:e.isLogin}}),(function(e){return{cartRemove:function(t){return e(R(t))},cartUpdate:function(t){return e(S(t))},authHandler:function(t){return e({type:"AUTH_HANDLER"})}}}))(F),M=function(e){Object(O.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).showModal=function(){n.setState({visible:!0})},n.handleOk=function(){n.setState({loading:!0}),n.setState({loading:!1,visible:!1}),n.props.authHandler(),n.props.history.push({pathname:"/"})},n.handleCancel=function(){n.setState({visible:!1})},n.cartHandler=function(e){var t=JSON.parse(localStorage.getItem("userId"));n.props.cartAdder({userId:t,selectedItem:Object(m.a)(Object(m.a)({},e),{},{quantity:1})})},n.FilterHandler=function(e){var t=e.target.getAttribute("name");n.setState({filter:"ShowAll"===t?"Fashion":t}),n.props.addFilter(e.target.getAttribute("name"))},n.state={category:[],filter:"Fashion",loading:!1,visible:!1},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.loading,c=this.props.data,l=JSON.parse(localStorage.getItem("data")),i={};return l&&l.forEach((function(e){i[e.category]||(i[e.category]=1)})),r.a.createElement("div",{className:"row m-0 mt-4 flex-column flex-sm-column flex-md-column  flex-lg-row justify-content-between flex-nowrap"},r.a.createElement("div",{className:"col-12 col-sm-12 col-md-12 col-lg-4"},r.a.createElement("div",{className:"col border h-100 d-flex flex-md-row flex-sm-row flex-lg-column  justify-content-sm-around justify-content-lg-start"},[].concat(Object(d.a)(Object.keys(i)),["ShowAll"]).map((function(t){return r.a.createElement("div",{key:Object(A.a)(),className:"card m-2"},r.a.createElement("div",{name:t,className:"card-body text-capitalize ",style:{cursor:"pointer"},onClick:e.FilterHandler},t))})))),r.a.createElement("div",{className:"col-lg-8 col-sm-12 border p-0"},r.a.createElement("div",{className:"col p-0 "},r.a.createElement("div",{className:"card m-3 border-0"},r.a.createElement("h5",{className:"card-title text-capitalize"},"Products under ",this.state.filter)),r.a.createElement("div",{className:"row m-0 "},c?c.map((function(t){return r.a.createElement("div",{key:Object(A.a)(),className:"mt-3 flex-nowrap w-sm-50 col-5 col-sm-3 col-md-3 ml-3 ml-sm-3 ml-md-3 ml-lg-0",style:{height:"20rem"}},r.a.createElement("div",{className:"card border h-100"},r.a.createElement("img",{className:"card-img-top h-50",src:t.product_image,alt:"Card cap"}),r.a.createElement("div",{className:"card-body d-flex flex-start flex-column p-1 justify-content-between"},r.a.createElement("div",{className:"p-3"},r.a.createElement("h5",{className:"card-title text-capitalize"},t.product_name),r.a.createElement("p",null,"Price: ",t.price)),e.props.isLogin?r.a.createElement("button",{className:"btn btn-dark pl-4 pr-5 text-center rounded-0",onClick:function(){return e.cartHandler(t)}},"Add to Cart"):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"btn btn-dark pl-4 pr-5 text-center rounded-0",onClick:e.showModal},"Add to Cart"),r.a.createElement(U,{visible:a,loading:n,handleOk:e.handleOk,handleCancel:e.handleCancel})))))})):r.a.createElement("div",null," Loading...")))))}}]),a}(n.Component),q=Object(i.b)((function(e){return{data:e.data,isLoading:e.isLoading,isLogin:e.isLogin}}),(function(e){return{fetchData:function(t){return e(function(){return function(){var e=Object(x.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"FETCH_PRODUCT_REQUEST"}),e.next=3,k.a.get("data/data.json").then((function(e){return t(T(e.data))})).catch((function(e){return console.log(e)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(t))},cartAdder:function(t){return e({type:"ADD_PRODUCT_TO_CART",product:t})},addFilter:function(t){return e({type:"FILTER_DATA",filterType:t})},authHandler:function(t){return e({type:"AUTH_HANDLER"})}}}))(M),J=a(7);var V=Object(i.b)((function(e){return{cart:e.cart}}),(function(e){return{emptyCart:function(t){return e({type:"EMPTY_CART",userId:t})}}}))((function(e){var t=Object(n.useState)(0),a=Object(u.a)(t,2),c=a[0],l=a[1],i=e.history.location;return Object(n.useEffect)((function(){var t=0;e.cart.forEach((function(e){return t+=e.price*e.quantity})),l(t)}),[e.cart]),r.a.createElement("div",{className:"d-flex justify-content-center mt-5"},r.a.createElement(H,{location:i.pathname}),r.a.createElement("div",{className:"card w-25 h-50 ml-3"},r.a.createElement("ul",{className:"list-group list-group-flush"},r.a.createElement("li",{className:"list-group-item"},"Total Price: ",c)),r.a.createElement("button",{type:"button",className:"btn btn-success",onClick:function(){alert("Your order is successful"),e.emptyCart(JSON.parse(localStorage.getItem("userId"))),e.history.push({pathname:"/"})}},"Place Order")))})),z=function(e){Object(O.a)(a,e);var t=Object(y.a)(a);function a(e){return Object(E.a)(this,a),t.call(this,e)}return Object(v.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container-fluid p-0"},r.a.createElement(J.b,{render:function(e){var t=e.history;return r.a.createElement(P,{history:t})}}),r.a.createElement(J.b,{path:"/",exact:!0,render:function(e){var t=e.history;return r.a.createElement(q,{history:t})}}),r.a.createElement(J.b,{path:"/checkout",render:function(t){var a=t.history;return e.props.isLogin?r.a.createElement(V,{history:a}):r.a.createElement(J.a,{to:""})}}))}}]),a}(n.Component),Q=Object(i.b)((function(e){return{isLogin:e.isLogin}}),null)(z);l.a.render(r.a.createElement(i.a,{store:h},r.a.createElement(g.a,null,r.a.createElement(Q,null))),document.getElementById("root"))}},[[103,1,2]]]);
//# sourceMappingURL=main.4af59774.chunk.js.map